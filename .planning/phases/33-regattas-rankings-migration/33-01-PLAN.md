---
phase: 33-regattas-rankings-migration
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - src/v2/components/regatta/RegattaDetail.tsx
  - src/v2/components/regatta/RegattaList.tsx
  - src/v2/components/regatta/RegattaForm.tsx
  - src/v2/components/regatta/RegattaCalendar.tsx
  - src/v2/components/regatta/RegattaEmptyState.tsx
  - src/v2/components/regatta/EventForm.tsx
  - src/v2/components/regatta/RaceForm.tsx
  - src/v2/components/regatta/MarginDisplay.tsx
  - src/v2/components/regatta/ResultsForm.tsx
  - src/v2/components/regatta/ResultsCSVImport.tsx
  - src/v2/components/regatta/index.ts
autonomous: true

must_haves:
  truths:
    - "User sees warm V3 design tokens across all regatta components (no hardcoded hex or V1 color classes)"
    - "User sees glass-card effects on regatta detail cards and form panels"
    - "User sees V3 data color tokens for race result status indicators"
    - "User sees consistent ink-* and txt-* token usage across all 10 regatta components"
  artifacts:
    - path: "src/v2/components/regatta/RegattaDetail.tsx"
      provides: "V3-migrated regatta detail view with glass cards and data tokens"
      min_lines: 300
    - path: "src/v2/components/regatta/ResultsCSVImport.tsx"
      provides: "V3-migrated CSV import wizard with warm design tokens"
      min_lines: 400
    - path: "src/v2/components/regatta/RegattaList.tsx"
      provides: "V3-migrated regatta list with hover states and ink tokens"
      min_lines: 180
  key_links:
    - from: "src/v2/components/regatta/RegattaDetail.tsx"
      to: "src/v2/components/regatta/ResultsForm.tsx"
      via: "import and render for race result entry"
      pattern: "ResultsForm"
    - from: "src/v2/components/regatta/RegattaList.tsx"
      to: "src/v2/components/regatta/RegattaEmptyState.tsx"
      via: "renders when no regattas exist"
      pattern: "RegattaEmptyState"
---

<objective>
Migrate all 10 regatta components from V1/V2 color classes to V3 design tokens.

Purpose: Achieve visual consistency with the warm dark design system established in Phase 24. All regatta components must use CSS variable-backed tokens (ink-*, txt-*, data-*, accent-*) instead of hardcoded Tailwind colors (bg-gray-*, text-blue-*, border-zinc-*, etc).

Output: 10 regatta components fully migrated to V3 tokens, visually consistent with the rest of the v3.0 app.
</objective>

<execution_context>
@/home/swd/.claude/get-shit-done/workflows/execute-plan.md
@/home/swd/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/33-regattas-rankings-migration/33-RESEARCH.md
@src/v2/styles/tokens.css
@src/v2/styles/dark.css
</context>

<tasks>

<task type="auto">
  <name>Task 1: Migrate regatta detail, list, form, calendar, and empty state components to V3 tokens</name>
  <files>
    src/v2/components/regatta/RegattaDetail.tsx
    src/v2/components/regatta/RegattaList.tsx
    src/v2/components/regatta/RegattaForm.tsx
    src/v2/components/regatta/RegattaCalendar.tsx
    src/v2/components/regatta/RegattaEmptyState.tsx
  </files>
  <action>
    Migrate these 5 regatta components to V3 design tokens following the established Phase 28-32 migration pattern:

    1. **Color class replacements** (apply systematically):
       - `bg-gray-*` / `bg-zinc-*` / `bg-neutral-*` / `bg-stone-*` -> `bg-ink-*` tokens (bg-ink-base, bg-ink-raised, bg-ink-hover, bg-ink-well)
       - `text-gray-*` / `text-zinc-*` / `text-neutral-*` -> `text-txt-*` tokens (text-txt-primary, text-txt-secondary, text-txt-tertiary)
       - `border-gray-*` / `border-zinc-*` -> `border-ink-border`
       - `bg-blue-*` (info/primary) -> `bg-data-good/10` or V3 interactive tokens
       - `bg-green-*` (success) -> `bg-data-excellent/10` with `text-data-excellent`
       - `bg-red-*` (error/danger) -> `bg-data-poor/10` with `text-data-poor`
       - `bg-yellow-*` / `bg-amber-*` (warning) -> `bg-data-warning/10` with `text-data-warning`
       - `bg-purple-*` / `bg-violet-*` -> `bg-accent-copper/10` with `text-accent-copper`
       - `shadow-*` -> warm shadows or glass-card utility
       - `ring-*` hardcoded colors -> `ring-focus-ring`

    2. **Card containers**: Replace plain `bg-gray-800 rounded-lg` with `glass-card` utility class where appropriate (cards, panels, modals).

    3. **Interactive states**: Ensure hover states use `hover:bg-ink-hover` and focus states use `focus:ring-focus-ring`.

    4. **RegattaDetail.tsx** (374 lines): This is the largest component. Migrate race timeline, result cards, margin displays, and action buttons. Use `data-excellent` for wins, `data-poor` for losses, `data-warning` for close margins.

    5. **RegattaEmptyState.tsx**: Use EmptyState pattern from Phase 27 with illustration + CTA.

    Do NOT change component logic, props, or data flow. Token migration only.
  </action>
  <verify>
    Run `grep -rn 'bg-gray-\|bg-zinc-\|bg-neutral-\|text-gray-\|text-zinc-\|border-gray-\|border-zinc-' src/v2/components/regatta/RegattaDetail.tsx src/v2/components/regatta/RegattaList.tsx src/v2/components/regatta/RegattaForm.tsx src/v2/components/regatta/RegattaCalendar.tsx src/v2/components/regatta/RegattaEmptyState.tsx` — should return zero matches.
    Run `npx tsc --noEmit` to verify no TypeScript errors introduced.
  </verify>
  <done>All 5 components use only V3 design tokens. No hardcoded gray/zinc/neutral color classes remain. TypeScript compiles clean.</done>
</task>

<task type="auto">
  <name>Task 2: Migrate event form, race form, margin display, results form, and CSV import to V3 tokens</name>
  <files>
    src/v2/components/regatta/EventForm.tsx
    src/v2/components/regatta/RaceForm.tsx
    src/v2/components/regatta/MarginDisplay.tsx
    src/v2/components/regatta/ResultsForm.tsx
    src/v2/components/regatta/ResultsCSVImport.tsx
  </files>
  <action>
    Migrate remaining 5 regatta components to V3 design tokens using the same replacement map from Task 1.

    Component-specific notes:

    1. **EventForm.tsx** (175 lines) and **RaceForm.tsx** (180 lines): Form inputs should use `bg-ink-well` for input backgrounds, `border-ink-border` for borders, `text-txt-primary` for input text, `text-txt-secondary` for labels, `focus:ring-focus-ring` for focus states.

    2. **MarginDisplay.tsx** (81 lines): Use `data-excellent` (green) for winning margins, `data-poor` (red) for losing margins, `data-warning` (amber) for close/tight margins. Use `font-mono` with `tabular-nums` for time displays.

    3. **ResultsForm.tsx** (243 lines): Migrate form controls, validation error messages (`text-data-poor`), success states (`text-data-excellent`), and submit buttons to V3 tokens.

    4. **ResultsCSVImport.tsx** (532 lines): Largest file. Migrate the multi-step import wizard. Progress indicators, file drop zone, column mapping table, preview table, and import summary all need V3 tokens. Use `bg-ink-raised` for step panels, `accent-copper` for active step indicator.

    Do NOT change component logic, props, or data flow. Token migration only.
  </action>
  <verify>
    Run `grep -rn 'bg-gray-\|bg-zinc-\|bg-neutral-\|text-gray-\|text-zinc-\|border-gray-\|border-zinc-' src/v2/components/regatta/EventForm.tsx src/v2/components/regatta/RaceForm.tsx src/v2/components/regatta/MarginDisplay.tsx src/v2/components/regatta/ResultsForm.tsx src/v2/components/regatta/ResultsCSVImport.tsx` — should return zero matches.
    Run `npx tsc --noEmit` to verify no TypeScript errors.
  </verify>
  <done>All 5 remaining regatta components use only V3 design tokens. Zero hardcoded color classes remain across all 10 regatta components.</done>
</task>

</tasks>

<verification>
- `grep -rn 'bg-gray-\|bg-zinc-\|text-gray-\|text-zinc-\|border-gray-\|border-zinc-\|bg-neutral-\|text-neutral-' src/v2/components/regatta/` returns zero matches
- `npx tsc --noEmit` passes
- `npm run build` succeeds
</verification>

<success_criteria>
All 10 regatta components are migrated to V3 design tokens. No V1/V2 hardcoded color classes remain in any regatta component file. The app builds successfully with no TypeScript errors.
</success_criteria>

<output>
After completion, create `.planning/phases/33-regattas-rankings-migration/33-01-SUMMARY.md`
</output>
